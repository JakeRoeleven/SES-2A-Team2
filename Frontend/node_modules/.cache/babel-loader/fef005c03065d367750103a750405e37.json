{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Form,Segment,Button}from'semantic-ui-react';import Select from'react-select';import InterestSelect from'../components/InterestSelects';import firebase from'./../firebase';import MajorSelect from'../components/MajorSelect';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var degreeYearOptions=[{value:'1',label:'1'},{value:'2',label:'2'},{value:'3',label:'3'},{value:'4',label:'4'},{value:'5',label:'5'},{value:'6',label:'6'}];var StudentForm=/*#__PURE__*/function(_Component){_inherits(StudentForm,_Component);var _super=_createSuper(StudentForm);// TODO: Postgrad, DEgree Name, Redirect if already have details, for validation\nfunction StudentForm(props){var _this;_classCallCheck(this,StudentForm);_this=_super.call(this,props);_this.handleInputChange=function(event){var _event$target=event.target,value=_event$target.value,name=_event$target.name;_this.setState(_defineProperty({},name,value));};_this.handleSelectInputChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event,select){var name,value;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:name=select.name;value=event.value;_this.setState(_defineProperty({},name,value));case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.setCurrentInterests=function(value){_this.setState({current_interests:value});};_this.setMajor=function(value){_this.setState({major:value});};_this.setDisplayedInterests=function(value){console.log(value);_this.setState({displayed_interests:value});};_this.getStudentData=function(){var student={};var firebaseDetails=firebase.getCurrentUser();// Push id from firebase\nstudent['id']=firebaseDetails.l;student[\"student_data\"]={};student[\"student_data\"]['name']=_this.state.firstname.concat(\" \").concat(_this.state.lastname);//TODO: Need degree\nstudent[\"student_data\"]['degree']=_this.state.major;student[\"student_data\"]['major']=_this.state.major;student[\"student_data\"]['year']=_this.state.yearOfDegree;student[\"student_data\"]['postgraduate']=false;student[\"student_data\"]['interests']=_this.state.current_interests;return student;};_this.onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){var student;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:student=_this.getStudentData();_this.setState({loading:true});event.preventDefault();fetch('http://localhost:8080/api/new-student',{method:'POST',body:JSON.stringify(student),headers:{'Content-Type':'application/json'}}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(res){var error;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(res.status===200)){_context2.next=4;break;}_this.props.history.push('/home');_context2.next=10;break;case 4:_context2.t0=JSON;_context2.next=7;return res.json();case 7:_context2.t1=_context2.sent;error=_context2.t0.parse.call(_context2.t0,_context2.t1);alert(error);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x4){return _ref3.apply(this,arguments);};}()).catch(function(err){alert(err);});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref2.apply(this,arguments);};}();_this.state={firstname:'',lastname:'',major:'',yearOfDegree:'',current_interests:[],displayed_interests:[]};return _this;}_createClass(StudentForm,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Segment,{color:\"blue\",padded:true,textAlign:\"center\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form,{size:\"large\",onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsx(Form.Input,{name:\"firstname\",required:true,minLength:\"3\",maxLength:\"20\",fluid:true,icon:\"user\",iconPosition:\"left\",placeholder:\"First Name\",value:this.state.firstname,onChange:this.handleInputChange}),/*#__PURE__*/_jsx(Form.Input,{name:\"lastname\",required:true,minLength:\"3\",maxLength:\"20\",fluid:true,icon:\"user\",iconPosition:\"left\",placeholder:\"Lastname\",value:this.state.lastname,onChange:this.handleInputChange}),/*#__PURE__*/_jsx(Select,{type:\"yearOfDegree\",name:\"yearOfDegree\",required:true,options:degreeYearOptions,defaultValue:this.state.yearOfDegree,placeholder:'Select Year Of Study',onChange:this.handleSelectInputChange}),/*#__PURE__*/_jsx(MajorSelect,{setMajor:this.setMajor}),/*#__PURE__*/_jsx(InterestSelect,{displayed_interests:this.state.displayed_interests,setCurrentInterests:this.setCurrentInterests,setDisplayedInterests:this.setDisplayedInterests}),/*#__PURE__*/_jsx(Button,{loading:this.state.loading,type:\"submit\",value:\"Submit\",color:\"blue\",fluid:true,size:\"large\",children:\"Create Account\"})]})]});}}]);return StudentForm;}(Component);export default StudentForm;","map":{"version":3,"sources":["C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/src/pages/StudentForm.js"],"names":["React","Component","Form","Segment","Button","Select","InterestSelect","firebase","MajorSelect","degreeYearOptions","value","label","StudentForm","props","handleInputChange","event","target","name","setState","handleSelectInputChange","select","setCurrentInterests","current_interests","setMajor","major","setDisplayedInterests","console","log","displayed_interests","getStudentData","student","firebaseDetails","getCurrentUser","l","state","firstname","concat","lastname","yearOfDegree","onSubmit","loading","preventDefault","fetch","method","body","JSON","stringify","headers","then","res","status","history","push","json","error","parse","alert","catch","err"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Form, Segment, Button } from 'semantic-ui-react';\r\nimport Select from 'react-select';\r\nimport InterestSelect from '../components/InterestSelects';\r\nimport firebase from './../firebase';\r\nimport MajorSelect from '../components/MajorSelect';\r\n\r\nconst degreeYearOptions = [\r\n\t{value: '1', label: '1'},\r\n\t{value: '2', label: '2'},\r\n\t{value: '3', label: '3'},\r\n\t{value: '4', label: '4'},\r\n\t{value: '5', label: '5'},\r\n\t{value: '6', label: '6'},\r\n]\r\n\r\nclass StudentForm extends Component {\r\n\r\n    // TODO: Postgrad, DEgree Name, Redirect if already have details, for validation\r\n    \r\n\tconstructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\t\t\tfirstname: '',\r\n\t\t\tlastname: '',\r\n\t\t\tmajor: '',\r\n\t\t\tyearOfDegree: '',\r\n\t\t\tcurrent_interests: [],\r\n\t\t\tdisplayed_interests: [],\r\n        };\r\n    }\r\n\r\n    handleInputChange = (event) => {\r\n        const { value, name } = event.target;\r\n        this.setState({ [name]: value });\r\n    };\r\n\r\n    handleSelectInputChange = async (event, select) => {  \t\r\n        let name = select.name;\r\n\t\tlet value = event.value;\r\n\t\tthis.setState( { [name] : value } );\r\n    }\r\n\r\n\tsetCurrentInterests = (value) => {\r\n\t\tthis.setState({ current_interests: value });\t\t\t\r\n\t}\r\n\r\n\tsetMajor = (value) => {\r\n\t\tthis.setState({ major: value });\t\t\t\r\n\t}\r\n\r\n\tsetDisplayedInterests = (value) => {\r\n\t\tconsole.log(value)\r\n\t\tthis.setState({ displayed_interests: value });\t\t\t\r\n\t}\r\n\r\n\tgetStudentData = () => {\r\n\t\tlet student = {}\r\n\t\tlet firebaseDetails = firebase.getCurrentUser()\r\n\r\n\t\t// Push id from firebase\r\n\t\tstudent['id'] = firebaseDetails.l;\r\n\r\n\t\tstudent[\"student_data\"] = {}\r\n\t\tstudent[\"student_data\"]['name'] = this.state.firstname.concat(\" \").concat(this.state.lastname)\r\n\t\t\r\n        //TODO: Need degree\r\n        student[\"student_data\"]['degree'] = this.state.major;\r\n        student[\"student_data\"]['major'] = this.state.major;\r\n\t\tstudent[\"student_data\"]['year'] = this.state.yearOfDegree;\r\n\t\tstudent[\"student_data\"]['postgraduate'] = false;\r\n\t\tstudent[\"student_data\"]['interests'] =this.state.current_interests;\r\n\r\n\t\treturn student;\r\n\t}\r\n\r\n    onSubmit = async (event) => {\r\n\t\tlet student = this.getStudentData();\r\n        this.setState({ loading: true });\r\n        event.preventDefault();\r\n        fetch('http://localhost:8080/api/new-student', {\r\n        \tmethod: 'POST',\r\n        \tbody: JSON.stringify(student),\r\n        \theaders: {\r\n        \t\t'Content-Type': 'application/json'\r\n        \t}\r\n        })\r\n        \t.then(async (res) => {\r\n        \t\tif (res.status === 200) {\r\n        \t\t\tthis.props.history.push('/home');\r\n        \t\t} else {\r\n        \t\t\tconst error = JSON.parse(await res.json());\r\n\t\t\t\t\talert(error)\r\n        \t\t}\r\n        \t})\r\n        \t.catch(err => {\r\n        \t\talert(err)\r\n        });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Segment color='blue' padded textAlign='center'>\r\n                <br />\r\n                {/* <Message\r\n                    hidden={this.state.hidden}\r\n                    error\r\n                    header={this.state.errorHeading}\r\n                    content={this.state.errorMessage}\r\n                /> */}\r\n                <Form size='large' onSubmit={this.onSubmit}>\r\n                    <Form.Input\r\n                        name='firstname'\r\n                        required\r\n                        minLength='3'\r\n                        maxLength='20'\r\n                        fluid\r\n                        icon='user'\r\n                        iconPosition='left'\r\n                        placeholder='First Name'\r\n                        value={this.state.firstname}\r\n                        onChange={this.handleInputChange}\r\n                    />\r\n                    <Form.Input\r\n                        name='lastname'\r\n                        required\r\n                        minLength='3'\r\n                        maxLength='20'\r\n                        fluid\r\n                        icon='user'\r\n                        iconPosition='left'\r\n                        placeholder='Lastname'\r\n                        value={this.state.lastname}\r\n                        onChange={this.handleInputChange}\r\n                    />\r\n\r\n                    <Select\r\n                        type='yearOfDegree'\r\n                        name='yearOfDegree'\r\n                        required\r\n                        options={degreeYearOptions}\r\n                        defaultValue={this.state.yearOfDegree}\r\n                        placeholder={'Select Year Of Study'}\r\n                        onChange={this.handleSelectInputChange}\r\n                    />\r\n\t\t\t\t\t<MajorSelect setMajor={this.setMajor}/>\r\n\t\t\t\t\t<InterestSelect \r\n\t\t\t\t\t\tdisplayed_interests={this.state.displayed_interests} \r\n\t\t\t\t\t\tsetCurrentInterests={this.setCurrentInterests} \r\n\t\t\t\t\t\tsetDisplayedInterests={this.setDisplayedInterests} />\r\n                    <Button\r\n                        loading={this.state.loading}\r\n                        type='submit'\r\n                        value='Submit'\r\n                        color='blue'\r\n                        fluid\r\n                        size='large'\r\n                    >\r\n                        Create Account\r\n                    </Button>\r\n                </Form>\r\n            </Segment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default StudentForm;\r\n"]},"metadata":{},"sourceType":"module"}