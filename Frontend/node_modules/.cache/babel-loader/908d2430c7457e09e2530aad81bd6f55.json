{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from'react';import Select from'react-select';import{jsx as _jsx}from\"react/jsx-runtime\";function InterestSelect(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),interests=_useState2[0],setInterests=_useState2[1];var handleSelectInputChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var value_array,filtered_interests,displayed_interests;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return event;case 2:value_array=_context.sent;// Reduce to array of interests\nfiltered_interests=[];displayed_interests=[];value_array.forEach(function(elem){filtered_interests.push(elem.value);displayed_interests.push(elem);});// Only allow 3 interests\nif(filtered_interests.length<4){props.setCurrentInterests(filtered_interests);props.setDisplayedInterests(displayed_interests);}case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleSelectInputChange(_x){return _ref.apply(this,arguments);};}();var setInterestsDropdownList=function setInterestsDropdownList(interests_array){var interests_obj_array=[];interests_array.forEach(function(elem){interests_obj_array.push({value:elem,label:elem});});setInterests(interests_obj_array);};// Fetch full subject list from API\nvar fetchInterests=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:fetch(\"http://localhost:8080/api/interests\",{crossDomain:true,mode:'cors',method:'GET',headers:{'Content-Type':'application/json','Access-Control-Allow-Origin':'*'}}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(res){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=setInterestsDropdownList;_context2.next=3;return res.json();case 3:_context2.t1=_context2.sent;(0,_context2.t0)(_context2.t1);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}()).catch(function(err){console.log(err);});case 1:case\"end\":return _context3.stop();}}},_callee3);})),[]);useEffect(function(){fetchInterests();},[fetchInterests]);return/*#__PURE__*/_jsx(Select,{type:\"interests\",name:\"interests\",required:true,options:interests,defaultValue:interests,isMulti:true,placeholder:'Select Interests...',value:props.displayed_interests,onChange:function onChange(e){return handleSelectInputChange(e);}});}export default InterestSelect;","map":{"version":3,"sources":["C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/src/components/InterestSelects.js"],"names":["React","useState","useEffect","useCallback","Select","InterestSelect","props","interests","setInterests","handleSelectInputChange","event","value_array","filtered_interests","displayed_interests","forEach","elem","push","value","length","setCurrentInterests","setDisplayedInterests","setInterestsDropdownList","interests_array","interests_obj_array","label","fetchInterests","fetch","crossDomain","mode","method","headers","then","res","json","catch","err","console","log","e"],"mappings":"seAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,CAAoCC,WAApC,KAAsD,OAAtD,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,C,2CAEA,QAASC,CAAAA,cAAT,CAAwBC,KAAxB,CAA+B,eAEOL,QAAQ,CAAC,EAAD,CAFf,wCAEpBM,SAFoB,eAETC,YAFS,eAI3B,GAAMC,CAAAA,uBAAuB,0FAAG,iBAAOC,KAAP,+LAGJA,CAAAA,KAHI,QAGxBC,WAHwB,eAK5B;AACIC,kBANwB,CAMH,EANG,CAOxBC,mBAPwB,CAOF,EAPE,CAQ5BF,WAAW,CAACG,OAAZ,CAAoB,SAACC,IAAD,CAAU,CAC1BH,kBAAkB,CAACI,IAAnB,CAAwBD,IAAI,CAACE,KAA7B,EACAJ,mBAAmB,CAACG,IAApB,CAAyBD,IAAzB,EACH,CAHD,EAKA;AACA,GAAIH,kBAAkB,CAACM,MAAnB,CAA4B,CAAhC,CAAmC,CAC/BZ,KAAK,CAACa,mBAAN,CAA0BP,kBAA1B,EACAN,KAAK,CAACc,qBAAN,CAA4BP,mBAA5B,EACH,CAjB2B,sDAAH,kBAAvBJ,CAAAA,uBAAuB,4CAA7B,CAoBA,GAAMY,CAAAA,wBAAwB,CAAG,QAA3BA,CAAAA,wBAA2B,CAACC,eAAD,CAAqB,CAClD,GAAIC,CAAAA,mBAAmB,CAAG,EAA1B,CACAD,eAAe,CAACR,OAAhB,CAAwB,SAAAC,IAAI,CAAI,CAC5BQ,mBAAmB,CAACP,IAApB,CAAyB,CAACC,KAAK,CAAEF,IAAR,CAAcS,KAAK,CAAET,IAArB,CAAzB,EACH,CAFD,EAGAP,YAAY,CAACe,mBAAD,CAAZ,CACH,CAND,CAQA;AACH,GAAME,CAAAA,cAAc,CAAGtB,WAAW,sEAAC,wIAClCuB,KAAK,uCAAwC,CAC5CC,WAAW,CAAE,IAD+B,CAE5CC,IAAI,CAAE,MAFsC,CAG5CC,MAAM,CAAE,KAHoC,CAI5CC,OAAO,CAAE,CACR,eAAgB,kBADR,CAER,8BAA+B,GAFvB,CAJmC,CAAxC,CAAL,CAQGC,IARH,2FAQQ,kBAAOC,GAAP,mIACPX,wBADO,wBACwBW,CAAAA,GAAG,CAACC,IAAJ,EADxB,2HARR,kEAUGC,KAVH,CAUS,SAACC,GAAD,CAAS,CACjBC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACA,CAZD,EADkC,wDAAD,GAc/B,EAd+B,CAAlC,CAgBGjC,SAAS,CAAC,UAAM,CACZuB,cAAc,GACjB,CAFQ,CAEN,CAACA,cAAD,CAFM,CAAT,CAIA,mBACI,KAAC,MAAD,EACI,IAAI,CAAC,WADT,CAEI,IAAI,CAAC,WAFT,CAGI,QAAQ,KAHZ,CAII,OAAO,CAAElB,SAJb,CAKI,YAAY,CAAEA,SALlB,CAMI,OAAO,KANX,CAOI,WAAW,CAAE,qBAPjB,CAQI,KAAK,CAAED,KAAK,CAACO,mBARjB,CASI,QAAQ,CAAE,kBAACyB,CAAD,QAAO7B,CAAAA,uBAAuB,CAAC6B,CAAD,CAA9B,EATd,EADJ,CAaH,CAED,cAAejC,CAAAA,cAAf","sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\r\nimport Select from 'react-select';\r\n\r\nfunction InterestSelect(props) {\r\n\r\n    const [interests, setInterests] = useState([]);\r\n\r\n    const handleSelectInputChange = async (event) => {\r\n\r\n        // Get array of objects \r\n        let value_array = await event;\r\n\r\n        // Reduce to array of interests\r\n        let filtered_interests = []\r\n        let displayed_interests = []\r\n        value_array.forEach((elem) => {\r\n            filtered_interests.push(elem.value)\r\n            displayed_interests.push(elem)\r\n        });\r\n\r\n        // Only allow 3 interests\r\n        if (filtered_interests.length < 4) {\r\n            props.setCurrentInterests(filtered_interests);\t\t\t\r\n            props.setDisplayedInterests(displayed_interests)\r\n        }\t\t\r\n    }\r\n\r\n    const setInterestsDropdownList = (interests_array) => {\r\n        let interests_obj_array = [];\r\n        interests_array.forEach(elem => {\r\n            interests_obj_array.push({value: elem, label: elem});\r\n        })\r\n        setInterests(interests_obj_array)\r\n    }\r\n\r\n    // Fetch full subject list from API\r\n\tconst fetchInterests = useCallback(async () => {\r\n\t\tfetch(`http://localhost:8080/api/interests`, {\r\n\t\t\tcrossDomain: true,\r\n\t\t\tmode: 'cors',\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Access-Control-Allow-Origin': '*',\r\n\t\t\t},\r\n\t\t}).then(async (res) => {\r\n\t\t\tsetInterestsDropdownList(await res.json());\r\n\t\t}).catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t});\r\n\t}, []);\r\n\r\n    useEffect(() => {\r\n        fetchInterests()\r\n    }, [fetchInterests]);\r\n\r\n    return (\r\n        <Select\r\n            type='interests'\r\n            name='interests'\r\n            required\r\n            options={interests}\r\n            defaultValue={interests}\r\n            isMulti\r\n            placeholder={'Select Interests...'}\r\n            value={props.displayed_interests}\r\n            onChange={(e) => handleSelectInputChange(e)}\r\n        />\r\n    );\r\n}\r\n\r\nexport default InterestSelect;\r\n"]},"metadata":{},"sourceType":"module"}