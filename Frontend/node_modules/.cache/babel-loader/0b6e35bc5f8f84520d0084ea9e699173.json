{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Card,CardActions,CardContent,Button,Typography,IconButton}from'@material-ui/core';import StarOutline from'@material-ui/icons/StarOutline';import Star from'@material-ui/icons/Star';import CheckCircleOutline from'@material-ui/icons/CheckCircleOutline';import CheckCircle from'@material-ui/icons/CheckCircle';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SubjectCard(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),faculty=_useState4[0],setFaculty=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),displayParagraph=_useState6[0],setDisplayParagraph=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),favorite=_useState8[0],setFavorite=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),complete=_useState10[0],setComplete=_useState10[1];useEffect(function(){setTitle(props.subject._id+\" - \"+props.subject.course_name);setFaculty(\"Faculty of  \"+props.subject.faculty);setDisplayParagraph(props.subject.description.substring(0,300).trim());},[setTitle,setFaculty,setDisplayParagraph,props]);var displayFullDescription=function displayFullDescription(){setDisplayParagraph(props.subject.description);};var toggleFavorite=function toggleFavorite(){setFavorite(!favorite);};var toggleComplete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var old_student,student_id,completed,student;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setComplete(!complete);old_student={};student_id=sessionStorage.getItem('user_id');_context3.next=5;return fetch(\"http://localhost:8080/api/student/\".concat(student_id),{crossDomain:true,mode:'cors',method:'GET',headers:{'Content-Type':'application/json','Access-Control-Allow-Origin':'*'}}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return res.json();case 2:old_student=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(err){console.log(err);});case 5:completed=old_student['courses_completed'];completed.push(id);// Make the student object\nstudent={};student['id']=old_student._id;student[\"student_data\"]={};student[\"student_data\"]['name']=old_student.name;student[\"student_data\"]['degree']=old_student.degree;student[\"student_data\"]['major']=old_student.major;student[\"student_data\"]['year']=old_student.year;student[\"student_data\"]['postgraduate']=old_student.postgraduate;student[\"student_data\"]['interests']=old_student.interests;student[\"student_data\"]['courses_completed']=completed;fetch('http://localhost:8080/api/update-student',{method:'POST',body:JSON.stringify(student),headers:{'Content-Type':'application/json'}}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(res){var error;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(res.status===200)){_context2.next=4;break;}alert(\"Details updated\");_context2.next=10;break;case 4:_context2.t0=JSON;_context2.next=7;return res.json();case 7:_context2.t1=_context2.sent;error=_context2.t0.parse.call(_context2.t0,_context2.t1);alert(error);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref3.apply(this,arguments);};}()).catch(function(err){alert(err);});case 18:case\"end\":return _context3.stop();}}},_callee3);}));return function toggleComplete(_x){return _ref.apply(this,arguments);};}();var FavoriteStar=function FavoriteStar(){if(favorite){return/*#__PURE__*/_jsx(Star,{style:{color:'#ffc107'}});}else{return/*#__PURE__*/_jsx(StarOutline,{});}};var CompleteCircle=function CompleteCircle(){if(complete){return/*#__PURE__*/_jsx(CheckCircle,{style:{color:'#43a047'}});}else{return/*#__PURE__*/_jsx(CheckCircleOutline,{});}};return/*#__PURE__*/_jsxs(Card,{style:{marginBottom:\"1%\",overflow:'visible'},children:[/*#__PURE__*/_jsxs(CardContent,{style:{display:\"flex\",paddingBottom:'0px'},children:[/*#__PURE__*/_jsxs(Typography,{color:\"textPrimary\",style:{padding:'12px',paddingLeft:'0px'},children:[\" \",title,\" \"]}),/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"favorite\",style:{marginLeft:\"auto\"},onClick:function onClick(){return toggleComplete(props.subject._id);},children:/*#__PURE__*/_jsx(CompleteCircle,{})}),/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"favorite\",onClick:function onClick(){return toggleFavorite(props.subject._id);},children:/*#__PURE__*/_jsx(FavoriteStar,{})})]}),/*#__PURE__*/_jsxs(CardContent,{style:{paddingLeft:'16px',paddingTop:'0px'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",children:[\" \",faculty,\" \"]}),/*#__PURE__*/_jsxs(Typography,{paragraph:true,style:{paddingTop:'10px'},children:[\" \",displayParagraph,\" \",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return displayFullDescription();},style:{fontSize:'0.6em'},children:\"Read More...\"}),\" \"]})]}),/*#__PURE__*/_jsx(CardActions,{style:{paddingRight:'28px',paddingBottom:'12px'},children:/*#__PURE__*/_jsx(Button,{style:{marginLeft:\"auto\"},target:\"_blank\",color:\"primary\",size:\"small\",href:props.subject.link,children:\"Visit Handbook\"})})]});}export default SubjectCard;","map":{"version":3,"sources":["C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/src/components/SubjectCard.js"],"names":["React","useState","useEffect","Card","CardActions","CardContent","Button","Typography","IconButton","StarOutline","Star","CheckCircleOutline","CheckCircle","SubjectCard","props","title","setTitle","faculty","setFaculty","displayParagraph","setDisplayParagraph","favorite","setFavorite","complete","setComplete","subject","_id","course_name","description","substring","trim","displayFullDescription","toggleFavorite","toggleComplete","id","old_student","student_id","sessionStorage","getItem","fetch","crossDomain","mode","method","headers","then","res","json","catch","err","console","log","completed","push","student","name","degree","major","year","postgraduate","interests","body","JSON","stringify","status","alert","error","parse","FavoriteStar","color","CompleteCircle","marginBottom","overflow","display","paddingBottom","padding","paddingLeft","marginLeft","paddingTop","fontSize","paddingRight","link"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport {\r\n    Card,\r\n    CardActions,\r\n    CardContent,\r\n    Button,\r\n    Typography,\r\n    IconButton\r\n} from '@material-ui/core';\r\n\r\nimport StarOutline from '@material-ui/icons/StarOutline';\r\nimport Star from '@material-ui/icons/Star';\r\nimport CheckCircleOutline from '@material-ui/icons/CheckCircleOutline';\r\nimport CheckCircle from '@material-ui/icons/CheckCircle';\r\n\r\nfunction SubjectCard(props) {\r\n\r\n    const [title, setTitle] = useState('');\r\n    const [faculty, setFaculty] = useState('');\r\n    const [displayParagraph, setDisplayParagraph] = useState('');\r\n    const [favorite, setFavorite] = useState(false);\r\n    const [complete, setComplete] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setTitle(props.subject._id + \" - \" + props.subject.course_name);\r\n        setFaculty(\"Faculty of  \" + props.subject.faculty)\r\n        setDisplayParagraph(props.subject.description.substring(0, 300).trim())\r\n    }, [setTitle, setFaculty, setDisplayParagraph, props]);\r\n\r\n    const displayFullDescription = () => {\r\n        setDisplayParagraph(props.subject.description)\r\n    }\r\n\r\n    const toggleFavorite = () => {\r\n        setFavorite(!favorite)\r\n    }\r\n\r\n    const toggleComplete = async (id) => {\r\n        \r\n        setComplete(!complete);\r\n        let old_student = {};\r\n\r\n        let student_id = sessionStorage.getItem('user_id');\r\n        await fetch(`http://localhost:8080/api/student/${student_id}`, {\r\n            crossDomain: true,\r\n            mode: 'cors',\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Access-Control-Allow-Origin': '*',\r\n            },\r\n        }).then(async (res) => {\r\n            old_student = await res.json();\r\n        }).catch((err) => {\r\n                console.log(err);\r\n        });\r\n\r\n        let completed = old_student['courses_completed'];\r\n        completed.push(id)\r\n\r\n        \t\t\t// Make the student object\r\n        let student = {}\r\n        student['id'] = old_student._id;\r\n        student[\"student_data\"] = {}\r\n        student[\"student_data\"]['name'] = old_student.name;\r\n        student[\"student_data\"]['degree'] = old_student.degree;\r\n        student[\"student_data\"]['major'] = old_student.major;\r\n        student[\"student_data\"]['year'] = old_student.year;\r\n        student[\"student_data\"]['postgraduate'] = old_student.postgraduate;\r\n        student[\"student_data\"]['interests'] = old_student.interests;\r\n        student[\"student_data\"]['courses_completed'] = completed;\r\n\r\n        fetch('http://localhost:8080/api/update-student', {\r\n            method: 'POST',\r\n            body: JSON.stringify(student),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n            .then(async (res) => {\r\n                if (res.status === 200) {\r\n                    alert(\"Details updated\")\r\n                } else {\r\n                    const error = JSON.parse(await res.json());\r\n                    alert(error)\r\n                }\r\n            })\r\n            .catch(err => {\r\n                alert(err)\r\n        });\r\n    }\r\n\r\n    const FavoriteStar = () => {   \r\n        if (favorite) {\r\n            return <Star style={{ color: '#ffc107' }}/>\r\n        } else {\r\n            return  <StarOutline/>\r\n        }\r\n    }\r\n\r\n    const CompleteCircle = () => {   \r\n        if (complete) {\r\n            return <CheckCircle style={{ color: '#43a047' }}/>\r\n        } else {\r\n            return  <CheckCircleOutline/>\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card style={{marginBottom: \"1%\", overflow: 'visible'}}>\r\n           \r\n           <CardContent style={{display: \"flex\", paddingBottom: '0px'}}>   \r\n               \r\n                <Typography color='textPrimary' style={{padding: '12px', paddingLeft: '0px'}}> {title} </Typography> \r\n\r\n                <IconButton aria-label=\"favorite\" style={{marginLeft: \"auto\"}} onClick={() => toggleComplete(props.subject._id)}>\r\n                    <CompleteCircle/>\r\n                </IconButton>\r\n                \r\n                <IconButton aria-label=\"favorite\" onClick={() => toggleFavorite(props.subject._id)}>\r\n                    <FavoriteStar/>\r\n                </IconButton>\r\n\r\n            </CardContent>\r\n\r\n            <CardContent style={{paddingLeft: '16px', paddingTop: '0px'}}>  \r\n                <Typography variant=\"caption\"> {faculty} </Typography>\r\n                <Typography paragraph style={{ paddingTop: '10px'}}> {displayParagraph} <span onClick={() => displayFullDescription()} style={{ fontSize: '0.6em'}}>Read More...</span> </Typography>\r\n            </CardContent>\r\n            \r\n            <CardActions style={{paddingRight: '28px', paddingBottom: '12px'}}>\r\n                <Button  style={{ marginLeft: \"auto\"}} target=\"_blank\" color=\"primary\" size='small'  href={props.subject.link}>Visit Handbook</Button>\r\n            </CardActions>\r\n        \r\n        </Card>\r\n    );\r\n}\r\n\r\nexport default SubjectCard;\r\n"]},"metadata":{},"sourceType":"module"}