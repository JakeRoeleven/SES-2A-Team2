{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import Chip from'@material-ui/core/Chip';import{AppContext}from'../AppContext';import{jsx as _jsx}from\"react/jsx-runtime\";function CoursesCompleted(props){var data=useContext(AppContext);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),courses=_useState2[0],setCourses=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),subjects=_useState4[0],setSubjects=_useState4[1];var deleteSubject=function deleteSubject(subject_code){// Delete subject from array\nvar index=courses.indexOf(subject_code);var new_courses=courses;if(courses.length===1){new_courses=[];}else if(index>-1){new_courses=courses.splice(index,1);}// Make the student object\nvar student={};student['id']=props.student._id;student[\"student_data\"]={};student[\"student_data\"]['name']=props.student.name;student[\"student_data\"]['degree']=props.student.degree;student[\"student_data\"]['major']=props.student.major;student[\"student_data\"]['year']=props.student.year;student[\"student_data\"]['postgraduate']=props.student.postgraduate;student[\"student_data\"]['interests']=props.student.interests;student[\"student_data\"]['courses_completed']=new_courses;console.log(student);fetch('http://localhost:8080/api/update-student',{method:'POST',body:JSON.stringify(student),headers:{'Content-Type':'application/json'}}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(res.status===200)){_context.next=5;break;}alert(\"Details updated\");setCourses(new_courses);_context.next=11;break;case 5:_context.t0=JSON;_context.next=8;return res.json();case 8:_context.t1=_context.sent;error=_context.t0.parse.call(_context.t0,_context.t1);alert(error);case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(err){alert(err);});};var findSubjects=function findSubjects(){setCourses(props.courses);var subject_obj={};data.forEach(function(elem){if(courses.includes(elem._id)){subject_obj[elem._id]=elem;}});setSubjects(subject_obj);};useEffect(function(){findSubjects();},[findSubjects]);if(courses.length>0&&Object.keys(subjects).length>0){console.log('hi');console.log(courses);return Object.keys(courses).map(function(index){return/*#__PURE__*/_jsx(Chip,{label:courses[index]+\" - \"+subjects[courses[index]]['course_name'],onDelete:function onDelete(){return deleteSubject(courses[index]);},color:\"primary\",style:{marginRight:'0.5%'}});});}else{return/*#__PURE__*/_jsx(\"p\",{children:\"No Courses Completed...\"});}}export default CoursesCompleted;","map":{"version":3,"sources":["C:/Users/jaker/Desktop/SES-2A-Team2/Frontend/src/components/CompletedCourses.js"],"names":["React","useState","useEffect","useContext","Chip","AppContext","CoursesCompleted","props","data","courses","setCourses","subjects","setSubjects","deleteSubject","subject_code","index","indexOf","new_courses","length","splice","student","_id","name","degree","major","year","postgraduate","interests","console","log","fetch","method","body","JSON","stringify","headers","then","res","status","alert","json","error","parse","catch","err","findSubjects","subject_obj","forEach","elem","includes","Object","keys","map","marginRight"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport { AppContext } from '../AppContext';\r\n\r\nfunction CoursesCompleted(props) {\r\n\r\n\t\tconst data = useContext(AppContext);\r\n\r\n\t\tconst [courses, setCourses] = useState([]);\r\n\t\tconst [subjects, setSubjects] = useState({});\r\n\r\n\t\tconst deleteSubject = (subject_code) => {\r\n\t\t\t\r\n\t\t\t// Delete subject from array\r\n\t\t\tconst index = courses.indexOf(subject_code);\r\n\t\t\tlet new_courses = courses\r\n\t\t\tif (courses.length === 1) {\r\n\t\t\t\tnew_courses = []\r\n\t\t\t} else if (index > -1) {\r\n\t\t\t\tnew_courses = courses.splice(index, 1);\r\n\t\t\t}\r\n\r\n\t\t\t// Make the student object\r\n\t\t\tlet student = {}\r\n\t\t\tstudent['id'] = props.student._id;\r\n\t\t\tstudent[\"student_data\"] = {}\r\n\t\t\tstudent[\"student_data\"]['name'] = props.student.name;\r\n\t\t\tstudent[\"student_data\"]['degree'] = props.student.degree;\r\n\t\t\tstudent[\"student_data\"]['major'] = props.student.major;\r\n\t\t\tstudent[\"student_data\"]['year'] = props.student.year;\r\n\t\t\tstudent[\"student_data\"]['postgraduate'] = props.student.postgraduate;\r\n\t\t\tstudent[\"student_data\"]['interests'] = props.student.interests;\r\n\t\t\tstudent[\"student_data\"]['courses_completed'] = new_courses;\r\n\r\n\t\t\tconsole.log(student)\r\n\r\n\t\t\tfetch('http://localhost:8080/api/update-student', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tbody: JSON.stringify(student),\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t\t.then(async (res) => {\r\n\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\talert(\"Details updated\")\r\n\t\t\t\t\t\tsetCourses(new_courses)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst error = JSON.parse(await res.json());\r\n\t\t\t\t\t\talert(error)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\talert(err)\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t\tconst findSubjects = () => {\r\n\t\t\tsetCourses(props.courses)\r\n\t\t\tlet subject_obj = {};\r\n\t\t\tdata.forEach(elem => {\r\n\t\t\t\tif (courses.includes(elem._id)) {\r\n\t\t\t\t\t\tsubject_obj[elem._id] = elem\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tsetSubjects(subject_obj);\r\n\t\t}\r\n\r\n\t\tuseEffect(() => {\r\n\t\t\tfindSubjects()\r\n\t\t}, [findSubjects]);\r\n\r\n\t\tif (courses.length > 0 && Object.keys(subjects).length > 0) {\r\n\t\t\tconsole.log('hi')\r\n\t\t\tconsole.log(courses)\r\n\t\t\treturn (\r\n\t\t\t\tObject.keys(courses).map((index) => (\r\n\t\t\t\t\t\t<Chip label={courses[index] + \" - \" + subjects[courses[index]]['course_name']}  onDelete={() => deleteSubject(courses[index])} color=\"primary\" style={{ marginRight: '0.5%' }} />\r\n\t\t\t\t))\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<p>No Courses Completed...</p>\r\n\t\t\t)\r\n\t\t}\r\n \r\n}\r\n\r\nexport default CoursesCompleted;\r\n"]},"metadata":{},"sourceType":"module"}