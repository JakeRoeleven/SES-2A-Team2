{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jaker\\\\Desktop\\\\SES-2A-Team2\\\\frontend\\\\src\\\\pages\\\\Favorites.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback, useContext } from 'react';\nimport { Typography, Container, Button, IconButton } from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport Star from '@material-ui/icons/Star';\nimport { AppContext } from '../AppContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Favorites() {\n  _s();\n\n  const data = useContext(AppContext);\n  const [favorites, setFavorites] = useState([]);\n  const checkUserDetails = useCallback(async () => {\n    let id = sessionStorage.getItem('user_id');\n    await fetch(`http://${process.env.REACT_APP_SERVER}/api/student/${id}`, {\n      crossDomain: true,\n      mode: 'cors',\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    }).then(async res => {\n      let student_obj = await res.json();\n      let favs = await student_obj.favorite_subjects;\n      sessionStorage.setItem('favorites', favs);\n      setFavorites(favs);\n    }).catch(err => {}).then(() => {});\n  }, []);\n\n  const removeFavorite = async code => {\n    let url = 'http://${process.env.REACT_APP_SERVER}/api/student/favorites';\n    let id = sessionStorage.getItem('user_id');\n\n    if (id && code) {\n      await fetch(url, {\n        method: 'POST',\n        body: JSON.stringify({\n          \"subject_code\": code,\n          \"id\": id\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(async res => {\n        if (res.status === 200) {\n          let fav_res = await res.json();\n          setFavorites(await fav_res);\n          sessionStorage.setItem('favorites', await fav_res);\n        } else {\n          const error = JSON.parse(await res.json());\n          alert(error);\n        }\n      }).catch(err => {\n        alert(err);\n      });\n    } else {\n      alert('error');\n    }\n  };\n\n  useEffect(() => {\n    checkUserDetails();\n  }, [checkUserDetails]);\n\n  const FavoriteCard = subject => {\n    let code = subject['code'];\n    let subject_obj = {};\n    data.forEach(elem => {\n      if (code === elem._id) {\n        subject_obj = elem;\n      }\n    });\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 3,\n        style: {\n          marginBottom: '10px',\n          padding: '1.5%'\n        },\n        children: [code + \" \" + subject_obj[\"course_name\"], /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            float: 'right'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            style: {\n              marginTop: '-14px',\n              marginRight: '10px'\n            },\n            children: \" Learn More \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            style: {\n              marginTop: '-14px',\n              marginLeft: \"auto\"\n            },\n            onClick: () => removeFavorite(code),\n            children: /*#__PURE__*/_jsxDEV(Star, {\n              style: {\n                color: '#ffc107'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this);\n  };\n\n  if (Object.keys(favorites).length < 1) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: false,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          style: {\n            paddingTop: '10px'\n          },\n          children: \" Favorite Subject List \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \" Use the search or recommendation function to add some favorite subjects... \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: false,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          style: {\n            paddingTop: '10px'\n          },\n          children: \" Favorite Subject List \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            listStyleType: 'none',\n            paddingLeft: '0px'\n          },\n          children: favorites.map((code, key) => /*#__PURE__*/_jsxDEV(FavoriteCard, {\n            code: code\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this)\n    }, void 0, false);\n  }\n}\n\n_s(Favorites, \"EF+uas8Yx27bLb6h9wCH3n2wFhk=\");\n\n_c = Favorites;\n;\nexport default Favorites;\n\nvar _c;\n\n$RefreshReg$(_c, \"Favorites\");","map":{"version":3,"sources":["C:/Users/jaker/Desktop/SES-2A-Team2/frontend/src/pages/Favorites.js"],"names":["React","useState","useEffect","useCallback","useContext","Typography","Container","Button","IconButton","Paper","Star","AppContext","Favorites","data","favorites","setFavorites","checkUserDetails","id","sessionStorage","getItem","fetch","process","env","REACT_APP_SERVER","crossDomain","mode","method","headers","then","res","student_obj","json","favs","favorite_subjects","setItem","catch","err","removeFavorite","code","url","body","JSON","stringify","status","fav_res","error","parse","alert","FavoriteCard","subject","subject_obj","forEach","elem","_id","marginBottom","padding","float","marginTop","marginRight","marginLeft","color","Object","keys","length","paddingTop","listStyleType","paddingLeft","map","key"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback, useContext } from 'react';\r\n\r\nimport { Typography, Container, Button, IconButton } from '@material-ui/core';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Star from '@material-ui/icons/Star';\r\n\r\nimport {AppContext} from '../AppContext';\r\n\r\nfunction Favorites() {  \r\n\r\n    const data = useContext(AppContext);\r\n    const [favorites, setFavorites] = useState([]);\r\n\r\n    const checkUserDetails = useCallback(async () => {\r\n        let id = sessionStorage.getItem('user_id');\r\n\t\tawait fetch(`http://${process.env.REACT_APP_SERVER}/api/student/${id}`, {\r\n\t\t\tcrossDomain: true,\r\n\t\t\tmode: 'cors',\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Access-Control-Allow-Origin': '*',\r\n\t\t\t},\r\n\t\t}).then(async (res) => {\r\n\t\t\tlet student_obj = await res.json();\r\n            let favs = await student_obj.favorite_subjects;\r\n\t\t\tsessionStorage.setItem('favorites', favs);\r\n\t\t\tsetFavorites(favs)\r\n\t\t}).catch((err) => {\r\n        }).then(() => {\r\n\t\t});\r\n\t}, []);\r\n\r\n    const removeFavorite = async (code) => {\r\n        let url = 'http://${process.env.REACT_APP_SERVER}/api/student/favorites'\r\n        let id = sessionStorage.getItem('user_id');\r\n    \r\n        if (id && code) {\r\n            await fetch(url, {\r\n                method: 'POST',\r\n                body: JSON.stringify({\r\n                    \"subject_code\": code ,\r\n                    \"id\": id\r\n                }),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n                .then(async (res) => {\r\n                    if (res.status === 200) {\r\n                        let fav_res = await res.json()\r\n                        setFavorites(await fav_res)\r\n                        sessionStorage.setItem('favorites', await fav_res)\r\n                    } else {\r\n                        const error = JSON.parse(await res.json());\r\n                        alert(error)\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    alert(err)\r\n            });\r\n        } else {\r\n            alert('error')\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        checkUserDetails()\r\n    }, [checkUserDetails])\r\n\r\n    const FavoriteCard = (subject) => {\r\n        \r\n        let code = subject['code'];\r\n        let subject_obj = {}\r\n        data.forEach(elem => {\r\n            if (code === elem._id) {\r\n                subject_obj = elem\r\n            }\r\n        })\r\n\r\n \r\n        return (\r\n            <li>\r\n                <Paper elevation={3} style={{marginBottom: '10px', padding: '1.5%'}}> \r\n                    {code + \" \" + subject_obj[\"course_name\"]}\r\n                    <div style={{float: 'right'}}>\r\n                        <Button style={{marginTop: '-14px', marginRight: '10px'}}> Learn More </Button>\r\n                        <IconButton style={{marginTop: '-14px', marginLeft: \"auto\"}} onClick={() => removeFavorite(code)}>\r\n                                <Star style={{ color: '#ffc107'}} />  \r\n                        </IconButton>\r\n                    </div>\r\n                </Paper>\r\n            </li>\r\n        );\r\n    }\r\n\r\n    if (Object.keys(favorites).length < 1) {\r\n        return (\r\n            <>\r\n            <Container maxWidth={false}>\r\n                <Typography variant='h5' style={{ paddingTop: '10px' }}> Favorite Subject List </Typography>\r\n                <p> Use the search or recommendation function to add some favorite subjects... </p>\r\n            </Container>\r\n            </>\r\n        )\r\n    } else {\r\n        return (\r\n            <>\r\n            <Container maxWidth={false}>\r\n                <Typography variant='h5' style={{ paddingTop: '10px' }}> Favorite Subject List </Typography>\r\n                <br />\r\n                <ul style={{listStyleType: 'none', paddingLeft: '0px'}}>\r\n                    {favorites.map((code, key) => (\r\n                        <FavoriteCard code={code} key={key}/>\r\n                    ))}\r\n                </ul>\r\n            </Container>\r\n            </>\r\n        );    \r\n    }\r\n    \r\n};\r\n\r\nexport default Favorites;\r\n"]},"metadata":{},"sourceType":"module"}